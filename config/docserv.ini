[server]
host = localhost
port = 8080
# Loglevels
# 0: warning
# 1: info
# 2: debug
loglevel = 2
# The repo dir will be used to cache remote git repositories.
repo_dir = /mnt/docserv-repos/
# For building, the locally cached git repo will be cloned again.
# This prevents branch checkout collisions during builds and other
# problems. It is recommended to mount a sufficiently large RAM disk
# to the temp_repo_dir directory.
temp_repo_dir = /dev/shm/
# The upper limit of threads is the number of logical CPU cores. Use
# the max_threads setting to reduce the number of threads.
max_threads = 8

[global]
# Document formats that should be contained in automatically generated zip files
zip_formats = pdf epub single-html
# A list of language codes that are recognized as valid.
valid_languages = en-us de-de fr-fr pt-br ja-jp zh-cn es-es it-it ko-kr hu-hu zh-tw cs-cz ar-ar pl-pl ru-ru
# Sections of the published site. Each section gets an own top-level
# navigation page. XML product configuration files can be assigned to a site
# section using the <product site-section="..."/> attribute. Each site section
# needs an HTML template file named template-[SITE_SECTION].html.
site_sections = main best-practices
# The default site section is used as the top-level index.html page.
default_site_section = main

# Document life cycle values that recognized on this instance.
[lifecycles]
# At least one life cycle value must be defined. On the top-level index page,
# life cycles are sorted the same way they are sorted in this configuration
# file.
# A space-separated list of the following values:
#   * lifecycle_info    - Enable additional information about the product life
#                         cycle value (e.g. warning that a product is
#                         unsupported)
#   * build_individual  - Build individual, unpacked documents
#   * build_zip         - Build documents and publish as a single ZIP file of
#                         an entire products documents in the formats
#                         referenced in zip_formats
#   * publish_internal  - Allow publication on sites marked "internal"
#   * publish_external  - Allow publication on sites marked "external"
supported = build_individual build_zip publish_internal publish_external
beta = lifecycle_info build_individual build_zip publish_internal publish_external
unsupported = lifecycle_info build_zip publish_internal publish_external
unpublished = lifecycle_info build_individual publish_internal

# Sections specific to targets (i.e., publication servers) must be named
# 'target_'
[target_0]
# Name of the target to identify it in the documentation configuration.
name = internal
# If not active, documents for the target will not be built.
active = yes
# Add the draft watermarks to the documents.
draft = yes
# Add remarks to the documents.
remarks = yes
# Add meta information (XML ID and source file name) to the documents.
meta = no
# Default XSLT parameters file (file must contain parameters of the form
# parameter='value', separated by newlines)
default_xslt_params = /etc/docserv/xslt-params.txt
# Directory for overview page templates.
template_dir = /etc/docserv/templates/
# Directory where the document configuration in XML format resides.
config_dir = /etc/docserv/config.d/
# A URL to the publication path. Can be a local or ssh/scp URL.
target_path = ssh://user@server:/srv/www/htdocs/documentation
# A URL to the publication path. Can be a local or ssh/scp URL.
backup_path = /mnt/internal-builds/
# [Optional] Directory with content to copy to the root dir of the server,
# e.g. .htaccess, favicon.ico, robots.txt, Google verification file, etc.
server_config_copy_dir = /etc/docserv/example.org-config
# Languages that will appear in the web UI
languages = en-us
# Default language of the web UI
default_lang = en-us
# Whether to omit the default language's path component from links by default
omit_default_lang_path = no
# Internal builds (this means even documents marked "unpublished" will be linked)
internal = yes
# Relative root path of the docserv2 installation on the publication server
# Used for relative resource paths within the navigational HTML pages
server_base_path = /
# Beginning of the URL to use for <link rel=canonical/> tags, must omit
# server base path and generated path
canonical_url_domain = https://www.example.org
# [Optional] Directory name for directory that resides under backup_path and
# will be copied as-is. Docserv2 will:
# * not manage this directory and has no idea where it comes from
# * ensure it is copied from backup_path to the target.
# * avoid naming conflicts with this directory.
# This directory must not be named "docserv".
external_document_tree = external-tree

[target_1]
name = external
active = yes
draft = no
remarks = no
meta = no
default_xslt_params = /etc/docserv/xslt-params.txt
template_dir = /etc/docserv/templates/
config_dir = /etc/docserv/config.d/
target_path = ssh://user@pubserver:/srv/www/htdocs/documentation
backup_path = /mnt/external-builds/
languages = en-us de-de fr-fr pt-br ja-jp zh-cn es-es
default_lang = en-us
omit_default_lang_path = no
internal = no
server_base_path = /
canonical_url_domain = https://www.example.com
server_config_copy_dir = /etc/docserv/example.com-config
external_document_tree = external-tree
